<?xml version="1.0" encoding="UTF-8"?>
<nifty xmlns="http://nifty-gui.sourceforge.net/nifty-1.3.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://nifty-gui.sourceforge.net/nifty-1.3.xsd http://nifty-gui.sourceforge.net/nifty-1.3.xsd">
  <useStyles filename="nifty-default-styles.xml" />
  <useControls filename="nifty-default-controls.xml" />
  
  <!--  include localized text -->
  <resourceBundle id="disclaimer"   filename = "Interface/Nifty/disclaimer" />
  <resourceBundle id="game"         filename = "Interface/Nifty/game" />
  <resourceBundle id="highscore"    filename = "Interface/Nifty/highscore" />
  <resourceBundle id="advanced"     filename = "Interface/Nifty/advanced" />
  <resourceBundle id="nick"         filename = "Interface/Nifty/nick" />
  
  <style id="nifty-panel-80">
    <attributes padding="8px,16px,24px,16px" backgroundImage="Interface/Nifty/nifty-panel-80.png" imageMode="resize:28,184,28,28,28,184,28,154,28,184,28,58" />
  </style>
  
  <style id="forestrunner-textfield#panel" base="nifty-textfield#panel"/>
  <style id="forestrunner-textfield#field" base="nifty-textfield#field" />
  <style id="forestrunner-textfield#text">
    <attributes font="Interface/Fonts/SansSerif-20.fnt" color="#000f" selectionColor="#f00f" visibleToMouse="false" align="left" valign="center" textHAlign="left" />
    <effect>
      <onFocus name="textColor" post="false" color="#cccf" />
    </effect>
  </style>
  <style id="forestrunner-textfield#cursor-panel" base="nifty-textfield#cursor-panel" />
  <style id="forestrunner-textfield#cursor" base="nifty-textfield#cursor" />

  <style id="forestrunner-button#panel" base="nifty-button#panel"/>
  <style id="forestrunner-button#text" >
    <attributes font="Interface/Fonts/SansSerif-20.fnt" align="center" valign="center" textHAlign="center" textVAlign="center" visibleToMouse="false"/>
    <effect>
      <onEnabled name="textColorAnimated" startColor="#8886" endColor="#eeef" post="false" length="150" />
      <onDisabled name="textColorAnimated" startColor="#eeef" endColor="#8886" post="false" length="150" />
    </effect>
  </style>
  
  <style id="forestrunner-horizontal-slider#panel">
    <attributes childLayout="horizontal" height="30px" align="center" focusable="true" />
  </style>
  
  <style id="forestrunner-horizontal-slider#left">
    <attributes filename="slider/slider.png" width="30px" height="30px" imageMode="sprite:23,23,6"/>
    <effect>
      <onClick name="focus" targetElement="#parent" />
      <onClick name="imageOverlay" filename="slider/slider.png" imageMode="sprite:23,23,8" post="true" />
      <onFocus name="imageOverlay" filename="slider/slider.png" imageMode="sprite:23,23,7" post="true" />
      <onHover name="border" color="#822f" post="true" />
      <onEnabled name="renderQuad" startColor="#2228" endColor="#2220" post="true" length="150" />
      <onDisabled name="renderQuad" startColor="#2220" endColor="#2228" post="true" length="150" />
    </effect>
  </style>
  
  <style id="forestrunner-horizontal-slider#right">
    <attributes filename="slider/slider.png" width="30px" height="30px" imageMode="sprite:23,23,9"/>
    <effect>
      <onClick name="focus" targetElement="#parent" />
      <onClick name="imageOverlay" filename="slider/slider.png" imageMode="sprite:23,23,11" post="true" />
      <onFocus name="imageOverlay" filename="slider/slider.png" imageMode="sprite:23,23,10" post="true" />
      <onHover name="border" color="#822f" post="true" />
      <onEnabled name="renderQuad" startColor="#2228" endColor="#2220" post="true" length="150" />
      <onDisabled name="renderQuad" startColor="#2220" endColor="#2228" post="true" length="150" />
    </effect>
  </style>
  
  <style id="forestrunner-horizontal-slider#background">
    <attributes filename="slider/slider.png" width="*" height="30px" childLayout="absolute" imageMode="sprite-resize:23,23,16,4,15,4,4,4,15,4,15,4,15,4,4" />
    <effect>
      <onClick name="focus" targetElement="#parent" />
    </effect>
  </style>
  
  <style id="forestrunner-horizontal-slider#position">
    <attributes filename="slider/slider.png" x="0px" y="0px" width="30px" height="30px" imageMode="sprite-resize:23,23,17,4,15,4,4,4,15,4,15,4,15,4,4" />
    <effect>
      <onClick name="focus" targetElement="#parent#parent" />
      <onFocus name="imageOverlay" filename="slider/slider.png" imageMode="sprite-resize:23,23,19,4,15,4,4,4,15,4,15,4,15,4,4" post="true" />
      <onHover name="imageOverlay" filename="slider/slider.png" imageMode="sprite-resize:23,23,18,4,15,4,4,4,15,4,15,4,15,4,4" post="true" />
      <onEnabled name="renderQuad" startColor="#2228" endColor="#2220" post="true" length="150" />
      <onDisabled name="renderQuad" startColor="#2220" endColor="#2228" post="true" length="150" />
    </effect>
  </style>
 
 
 
 
 
  
  <controlDefinition name="highscore-list-line">
	  <panel childLayout="horizontal" width="100%" align="center">
	       <control font="Interface/Fonts/SansSerif-8.fnt" id="#highscore-line-user" name="label" textHAlign="left" width="55%"  />
	       <control font="Interface/Fonts/SansSerif-8.fnt" id="#highscore-line-date" name="label" textHAlign="left" width="25%"  />
	       <control font="Interface/Fonts/SansSerif-8.fnt" id="#highscore-line-score" name="label" textHAlign="right" width="20%"  />
	  </panel>
  </controlDefinition>
  
  <!--  the disclaimer screen, displays the disclaimer and accept/reject buttons -->
  <screen id="disclaimer" controller="edu.mit.lids.ares.forestrunner.screens.DisclaimerScreen">
    <layer id="layer" backgroundColor="#0000" childLayout="center">
      <panel id="panel" style="nifty-panel-80" height="80%" width="80%" align="center" valign="center" childLayout="vertical" visibleToMouse="true">
        <effect>
          <!--  <onStartScreen name="move" mode="in" direction="top" length="300" startDelay="0" inherit="true"/>  -->
          <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true"/>
        </effect>
        <text id="text1" width="85%" font="aurulent-sans-16.fnt" text="${disclaimer.text}" color="#ffff" wrap="true" textHAlign="left"/>
        <panel id="button-panel" width="60%" height="40px" align="center" childLayout="horizontal">
            <control id="disclaimer.btn.agree" width="50%" height="100%" name="button" style="forestrunner-button" label="${disclaimer.agree_txt}" />
            <control id="disclaimer.btn.disagree" width="50%" height="100%"  name="button" style="forestrunner-button" label="${disclaimer.disagree_txt}" />
        </panel>
      </panel>
    </layer>
  </screen>
  
  <screen id="nick" controller="edu.mit.lids.ares.forestrunner.screens.NickScreen">
    <layer id="layer" backgroundColor="#0000" childLayout="center">
      <panel id="panel" style="nifty-panel-80" height="80%" width="80%" align="center" valign="center" childLayout="vertical" visibleToMouse="true">
        <effect>
          <onStartScreen name="move" mode="in" direction="top" length="300" startDelay="0" inherit="true"/>
          <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true"/>
        </effect>
        <text id="text1" width="85%" font="Interface/Fonts/SansSerif-20.fnt" text="${nick.text}" color="#ffff" wrap="true" textHAlign="left"/>
        <panel id="button-panel" width="80%" height="100%" align="center" childLayout="vertical">
	        <control id="txtfld.username" style="forestrunner-textfield" width="100%" height="40px" name="textfield" text="${nick.default}" maxLength="30" />
	        <panel id="spacer" height="20px" childLayout="vertical">
	        </panel>
	        <control id="nick.btn.finished" height="40px" width="60%" align="center" name="button" style="forestrunner-button" label="${nick.finished}" />
        </panel>
      </panel>
    </layer>
  </screen>
  
  <screen id="countdown3" controller="edu.mit.lids.ares.forestrunner.screens.CountdownScreen">
    <layer id="layer" backgroundColor="#0000" childLayout="center">
        <panel childLayout="center">
            <effect>
                <onStartScreen name="fade" start="#00" end="#ff" length="500" startDelay="0" inherit="true" onEndEffect="onStep(3)" />
                <onEndScreen name="fade" start="#ff" end="#00" length="500" startDelay="0" inherit="true"/>
            </effect>
            <image filename="Interface/Nifty/countdown-3.png" />
        </panel>
    </layer>
  </screen>
  
  <screen id="countdown2" controller="edu.mit.lids.ares.forestrunner.screens.CountdownScreen">
    <layer id="layer" backgroundColor="#0000" childLayout="center">
        <panel childLayout="center">
            <effect>
                <onStartScreen name="fade" start="#00" end="#ff" length="500" startDelay="0" inherit="true" onEndEffect="onStep(2)" />
                <onEndScreen name="fade" start="#ff" end="#00" length="500" startDelay="0" inherit="true"/>
            </effect>
            <image filename="Interface/Nifty/countdown-2.png" />
        </panel>
    </layer>
  </screen>
  
  <screen id="countdown1" controller="edu.mit.lids.ares.forestrunner.screens.CountdownScreen">
    <layer id="layer" backgroundColor="#0000" childLayout="center">
        <panel childLayout="center">
            <effect>
                <onStartScreen name="fade" start="#00" end="#ff" length="500" startDelay="0" inherit="true" onEndEffect="onStep(1)" />
                <onEndScreen name="fade" start="#ff" end="#00" length="500" startDelay="0" inherit="true"/>
            </effect>
            <image filename="Interface/Nifty/countdown-1.png" />
        </panel>
    </layer>
  </screen>
  
  <screen id="crash" controller="edu.mit.lids.ares.forestrunner.screens.CrashScreen">
    <layer id="layer" backgroundColor="#0000" childLayout="center">
        <panel childLayout="center">
            <effect>
                <onStartScreen name="fade" start="#00" end="#ff" length="100" startDelay="0" inherit="true" onEndEffect="onEndEffect()" />
                <onEndScreen name="fade" start="#ff" end="#00" length="1000" startDelay="0" inherit="true"/>
            </effect>
            <image filename="Interface/Nifty/crash.png" />
        </panel>
    </layer>
  </screen>

  
  <!--  the game screen, displays instructions and settings -->
  <screen id="game" controller="edu.mit.lids.ares.forestrunner.screens.GameScreen">
    <layer id="layer" backgroundColor="#0000" childLayout="center">
        <panel id="pnl.game" height="90%" width="90%" align="center" valign="center" childLayout="vertical">
            <effect>
	          <onStartScreen name="move" mode="in" direction="top" length="300" startDelay="0" inherit="true"/>
	          <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true" onEndEffect="onEndScreenEffect()"/>
	        </effect>
            <panel id="pnl.split" width="100%" height="100%" childLayout="horizontal">
                <panel id="pnl.instructions" style="nifty-panel-80" width="50%" height="50%" childLayout="vertical">
                    <text id="txt.instructions" width="90%" font="Interface/Fonts/SansSerif-20.fnt" text="${game.instructions}" color="#ffff" wrap="true" textHAlign="left"/>
                    <panel id="pnl.spacer2" width="100%" height="20px">
                    </panel>
                    <control id="game.btn.advanced" width="90%" height="40px" align="center" name="button" style="forestrunner-button" label="${game.advanced}"/>
                </panel>
                <panel id="pnl.options" style="nifty-panel-80" width="50%" height="80%" childLayout="vertical">
                    <text id="txt.speed" width="90%" font="Interface/Fonts/SansSerif-20.fnt" text="${game.speed}" color="#ffff" wrap="true" align="left" textHAlign="left"/>
                    <control id="game.sldr.velocity"  name="horizontalSlider" width="100%" height="30px" min="0" max="9" initial="0" stepSize="1" buttonStepSize="1" />
                    <text id="txt.density" width="90%" font="Interface/Fonts/SansSerif-20.fnt" text="${game.density}" color="#ffff" wrap="true" align="left" textHAlign="left"/>
                    <control id="game.sldr.density"  name="horizontalSlider" width="100%" height="30px" min="0" max="9" initial="0" stepSize="1" buttonStepSize="1" />
                    <text id="txt.radius" width="90%" font="Interface/Fonts/SansSerif-20.fnt" text="${game.radius}" color="#ffff" wrap="true" align="left" textHAlign="left"/>
                    <control id="game.sldr.radius"   name="horizontalSlider" width="100%" height="30px" min="0" max="9" initial="0" stepSize="1" buttonStepSize="1" />
                    <panel id="pnl.spacer" width="100%" height="20px">
                    </panel>
                    <panel id="pnl.buttons" width="90%" childLayout="horizontal" align="center">
                        <control id="game.btn.new" width="50%" height="40px" name="button" style="forestrunner-button" label="${game.newgame}"/>
                        <control id="game.btn.cancel" width="50%"  height="40px" name="button" style="forestrunner-button" label="${game.cancel}"/>
                    </panel>
                </panel>
            </panel>
      </panel>
    </layer>  
  </screen>
  
  <!--  the advanced settings, displays instructions and settings -->
  <screen id="advanced" controller="edu.mit.lids.ares.forestrunner.screens.AdvancedScreen">
    <layer id="layer" backgroundColor="#0000" childLayout="center">
        <panel id="pnl.advanced" style="nifty-panel-80" height="90%" width="90%" align="center" valign="center" childLayout="vertical">
            <effect>
              <onStartScreen name="move" mode="in" direction="top" length="300" startDelay="0" inherit="true"/>
              <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true"/>
            </effect>
            <panel id="pnl.center" width="90%" childLayout="vertical" align="center">
	            <panel id="pnl.chk1" width="400px" childLayout="horizontal" align="right">
	                <control name="label" font="Interface/Fonts/SansSerif-20.fnt" width="300px" textHAlign="left" text="Post Processor:"  />
	                <control id="advanced.chk.postProcessor" name="checkbox" align="right"  />
	            </panel>
                <panel id="pnl.chk2" width="375px" childLayout="horizontal" align="right">
                    <control name="label" font="Interface/Fonts/SansSerif-20.fnt" width="275px" textHAlign="left" text="Fog Filter:"  />
                    <control id="advanced.chk.fogFilter" name="checkbox"  />
                </panel>
                <panel id="pnl.chk3" width="400px" childLayout="horizontal" align="right">
                    <control name="label" font="Interface/Fonts/SansSerif-20.fnt" width="300px" textHAlign="left" text="Cartoon"  />
                    <control id="advanced.chk.cartoon" name="checkbox"  />
                </panel>
	            <panel id="pnl.chk5" width="400px" childLayout="horizontal" align="right">
	                <control name="label" font="Interface/Fonts/SansSerif-20.fnt" width="300px" textHAlign="left" text="Lighting"  />
	                <control id="advanced.chk.lighting" name="checkbox"  />
	            </panel>
	            <panel id="pnl.chk6" width="400px" childLayout="horizontal" align="right">
	                <control name="label" font="Interface/Fonts/SansSerif-20.fnt" width="300px" textHAlign="left" text="Debug Grids"  />
	                <control id="advanced.chk.debugGrids" name="checkbox"  />
	            </panel>
	            <panel id="pnl.chk7" width="400px" childLayout="horizontal" align="right">
	                <control name="label" font="Interface/Fonts/SansSerif-20.fnt" width="300px" textHAlign="left" text="Main Grid"  />
	                <control id="advanced.chk.mainGrid" name="checkbox"  />
	            </panel>
	            <panel id="pnl.chk7" width="400px" childLayout="horizontal" align="right">
                    <control name="label" font="Interface/Fonts/SansSerif-20.fnt" width="300px" textHAlign="left" text="Gradient Floor"  />
                    <control id="advanced.chk.gradientFloor" name="checkbox"  />
                </panel>
	            <panel id="pnl.chk8" width="400px" childLayout="horizontal" align="right">
                    <control name="label" font="Interface/Fonts/SansSerif-20.fnt" width="300px" textHAlign="left" text="Verbose"  />
                    <control id="advanced.chk.verbose" name="checkbox"  />
                </panel>
            </panel>
            <panel id="pnl.spacer" width="100%" height="20px" childLayout="horizontal">
            </panel>
            <panel id="pnl.buttons" width="50%" childLayout="horizontal" align="center">
                <control id="advanced.btn.ok"     width="50%" height="40px"  name="button" style="forestrunner-button" label="${advanced.ok}"/>
                <control id="advanced.btn.cancel" width="50%" height="40px"  name="button" style="forestrunner-button" label="${advanced.cancel}"/>
            </panel>            
      </panel>
    </layer>  
  </screen>
  
  <!--  the high score screen, displays high scores -->
  <screen id="empty" controller="edu.mit.lids.ares.forestrunner.screens.EmptyScreen">
    <layer id="layer" backgroundColor="#0000" childLayout="vertical">
        <panel id="pnl.hud" width="100%" childLayout="vertical">
            <control id="lbl.timer" align="right" name="label" text="Score: 00000.00" color="#000f" />
        </panel>
    </layer>
  </screen>
  
  <!--  the high score screen, displays high scores -->
  <screen id="highscore" controller="edu.mit.lids.ares.forestrunner.screens.HighScoreScreen">
    <layer id="layer" backgroundColor="#0000" childLayout="center">
      <panel id="pnl.end" height="80%" width="99%" align="center" valign="center" childLayout="vertical">
        <effect>
          <onStartScreen name="move" mode="in" direction="top" length="300" startDelay="0" inherit="true"/>
          <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true"/>
        </effect>
        <panel id="pnl.highscore" height="90%" width="100%" align="center" valign="center" childLayout="horizontal">
            <panel id="pnl.personalHigh" style="nifty-panel-80" height="100%" width="50%" childLayout="vertical">
                <text id="txt.personalHigh" font="aurulent-sans-16.fnt" text="${highscore.userHigh}" color="#ffff" wrap="true" textHAlign="left"/>
                <control id="lb.personalHigh" name="listBox" vertical="optional" horizontal="optional" displayItems="13" selection="Multiple" viewConverterClass="edu.mit.lids.ares.forestrunner.screens.HighScoreViewConverter">
                    <control name="highscore-list-line" />
                </control>
            </panel>
            <panel id="pnl.globalHigh" style="nifty-panel-80" height="100%" width="50%" childLayout="vertical"> 
                <text id="txt.globalHigh" font="aurulent-sans-16.fnt" text="${highscore.globalHigh}" color="#ffff" wrap="true" textHAlign="left"/>
                <control id="lb.globalHigh" name="listBox" vertical="optional" horizontal="optional" displayItems="13" selection="Multiple" viewConverterClass="edu.mit.lids.ares.forestrunner.screens.HighScoreViewConverter">
                    <control name="highscore-list-line" />
                </control>
            </panel>
        </panel>
        <panel id="pnl.bottom" style="nifty-panel-80" height="20%" width="80%" align="center" childLayout="horizontal">
            <control id="highscore.btn.again" name="button" height="100%" width="50%" style="forestrunner-button" label="${highscore.again}"/>
            <control id="highscore.btn.settings" name="button" height="100%" width="50%" style="forestrunner-button" label="${highscore.settings}"/>
        </panel>
      </panel>
    </layer>
  </screen>
</nifty>
